## 手搓编译

### 先解决问题：g++能找到库，但是Ninja 作为 CMake 的子进程，其执行环境无法找到g++相关库



```
  The C++ compiler

    "D:/Qt6.8.3/Tools/mingw1310_64/bin/g++.exe"

  is not able to compile a simple test program.

  It fails with the following output:

    Change Dir: 'C:/Users/mi/Desktop/untitled/CMakeFiles/CMakeScratch/TryCompile-1pcrcd'

    Run Build Command(s): D:/Qt6.8.3/Tools/Ninja/ninja.exe -v cmTC_00383
    [1/2] D:\Qt6.8.3\Tools\mingw1310_64\bin\g++.exe    -o CMakeFiles\cmTC_00383.dir\testCXXCompiler.cxx.obj -c C:\Users\mi\Desktop\untitled\CMakeFiles\CMakeScratch\TryCompile-1pcrcd\testCXXCompiler.cxx
    FAILED: CMakeFiles/cmTC_00383.dir/testCXXCompiler.cxx.obj
    D:\Qt6.8.3\Tools\mingw1310_64\bin\g++.exe    -o CMakeFiles\cmTC_00383.dir\testCXXCompiler.cxx.obj -c C:\Users\mi\Desktop\untitled\CMakeFiles\CMakeScratch\TryCompile-1pcrcd\testCXXCompiler.cxx
```



解决方法,强制给 Ninja 补全 MinGW 环境(`注意我发现只是对此次终端生效`)：

```
# 把MinGW的bin目录放到PATH最前面，确保优先找到
$env:PATH = "D:\Qt6.8.3\Tools\mingw1310_64\bin;" + $env:PATH
# 验证：输出PATH，确认能看到mingw1310_64/bin
echo $env:PATH
```



`注意我不知道在win的界面为什么新添加的path不生效需要重启电脑后才生效`



### 继续编译

1. 第一步指明qt库位置，编译器位置，哪种生成器(nijia.exe生成器位置必须单独告知，makefile就不用):`cmake -B ./build -DCMAKE_BUILD_TYPE=Debug -DCMAKE_PREFIX_PATH="D:/Qt6.8.3/6.8.3/mingw_64" -DCMAKE_C_COMPILER="D:/Qt6.8.3/Tools/mingw1310_64/bin/gcc.exe" -DCMAKE_CXX_COMPILER="D:/Qt6.8.3/Tools/mingw1310_64/bin/g++.exe" -DCMAKE_MAKE_PROGRAM="D:/Qt6.8.3/Tools/Ninja/ninja.exe" -G Ninja`
   1. qtcreator的方法：[cmake] Running D:\cmake4.1\bin\cmake.exe -S D:/myfile/myproject/test_project/test-qtcreator-qt6.8.3-cmake -B D:/myfile/myproject/test_project/test-qtcreator-qt6.8.3-cmake/build/Desktop_Qt_6_8_3_MinGW_64_bit-Debug "-DCMAKE_COLOR_DIAGNOSTICS:BOOL=ON" "-DCMAKE_BUILD_TYPE:STRING=Debug" "-DCMAKE_CXX_FLAGS_INIT:STRING=-DQT_QML_DEBUG" "-DQT_QMAKE_EXECUTABLE:FILEPATH=D:/Qt6.8.3/6.8.3/mingw_64/bin/qmake.exe" "-DCMAKE_C_COMPILER:FILEPATH=D:/Qt6.8.3/Tools/mingw1310_64/bin/gcc.exe" "-DQT_MAINTENANCE_TOOL:FILEPATH=D:/Qt6.8.3/MaintenanceTool.exe" "-DCMAKE_GENERATOR:STRING=Ninja" "-DCMAKE_PROJECT_INCLUDE_BEFORE:FILEPATH=D:\myfile\myproject\test_project\test-qtcreator-qt6.8.3-cmake\build\Desktop_Qt_6_8_3_MinGW_64_bit-Debug/.qtc/package-manager/auto-setup.cmake" "-DCMAKE_CXX_COMPILER:FILEPATH=D:/Qt6.8.3/Tools/mingw1310_64/bin/g++.exe" "-DCMAKE_PREFIX_PATH:PATH=D:/Qt6.8.3/6.8.3/mingw_64" in D:\myfile\myproject\test_project\test-qtcreator-qt6.8.3-cmake\build\Desktop_Qt_6_8_3_MinGW_64_bit-Debug.
   2. 关键是指明ninjia程序的位置
2. 第二步还是老配方:`cmake --build ./build`
   1. 指定项目编译：cmake --build ./build/Desktop_Qt_6_8_3_MinGW_64_bit-Debug --target mytest_minimize



## cmake gui编译

Qt6_DIR和QT_DIR都是一个；路径，直接在表格中填写即可

```
D:/Qt6.8.3/6.8.3/mingw_64/lib/cmake/Qt6
```



![image-20260113193315628](编译方法.资源/image-20260113193315628.png)





## 4大ide

### clion

不想弄了，对qt的支持版本号，啥玩意都要自己配

![image-20260113153950421](编译方法.资源/image-20260113153950421.png)

### qt creator

`项目路径依然不支持中文，有毒`

#### 这个Qt Debug Information Files不用安装

![image-20260114102349866](编译方法.资源/image-20260114102349866.png)

太大了，不安装，msvc也能调试：

![image-20260114102358316](编译方法.资源/image-20260114102358316.png)



### vscode

#### 安装

[Vscode或vs2022配置Qt项目_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1QmjKzaEaN/?spm_id_from=333.337.search-card.all.click&vd_source=6bed52958ded6f91dd38a86ae487d199)

安装：

![image-20260114152833082](编译方法.资源/image-20260114152833082.png)

添加环境变量：

D:\Qt6.8.3\6.8.3\mingw_64\bin

D:\Qt6.8.3\Tools\mingw1310_64\bin



设置路径：

D:\Qt6.8.3\Tools\mingw1310_64

D:\Qt6.8.3

D:\Qt6.8.3\6.8.3\mingw_64

![image-20260114153425798](编译方法.资源/image-20260114153425798.png)

![image-20260114153339333](编译方法.资源/image-20260114153339333.png)



![image-20260114153638853](编译方法.资源/image-20260114153638853.png)





测试：

![image-20260114155156376](编译方法.资源/image-20260114155156376.png)



如果cmake插件找不到编译器，还是这个位置手动指定一下：

![image-20260114155232691](编译方法.资源/image-20260114155232691.png)

#### ninjia无法编译

![image-20260114160658723](编译方法.资源/image-20260114160658723.png)



## linux下总是找不到c编译器

我把build删除后出现了：

我发现选择放弃也能编译成功

![image-20260215121352408](编译方法.资源/image-20260215121352408.png)
